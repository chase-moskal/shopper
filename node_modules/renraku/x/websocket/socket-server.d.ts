import { Api, ApiRemote, MetaMap, ConnectionControls, Logger, HttpHeaders } from "../types.js";
export declare function webSocketServer({ port, timeout, exposeErrors, maxPayloadSize, logger, acceptConnection, }: {
    port: number;
    timeout: number;
    exposeErrors: boolean;
    maxPayloadSize: number;
    logger?: Logger;
    acceptConnection({}: {
        headers: HttpHeaders;
        controls: ConnectionControls;
        prepareClientApi: <xApi extends Api>(map: MetaMap<xApi>) => ApiRemote<xApi>;
    }): {
        api: Api;
        handleConnectionClosed(): void;
    };
}): {
    close: () => void;
};
